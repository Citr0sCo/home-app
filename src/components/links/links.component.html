<div class="links-component">
    <div class="container">
        <div class="o-grid o-grid--wrap column-wrapper" cdkDropList id="column-wrapper" [cdkDropListConnectedTo]="[]" (cdkDropListDropped)="drop($event)" cdkDropListOrientation="horizontal">

            @for (column of columns; track column) {
                <div class="column" cdkDrag [cdkDragDisabled]="!isEditModeEnabled" [cdkDragData]="column">
                    <column [column]="column" [columns]="columns" [allStats]="allStats" [showWidgets]="showWidgets" (updated)="refreshLinkCache();" [isEditModeEnabled]="isEditModeEnabled"></column>
                </div>
            }

            @if (isEditModeEnabled) {
                <div class="o-grid__col o-grid__col--fixed o-grid__col--custom">
                    <div class="links__link">
                        <div class="links__link__heading">
                            <i class="fa fa-plus"></i>
                            Add
                        </div>
                        <wide-button (click)="createColumn()" [title]="'Add Column'"
                                     [icon]="'fas fa-plus'"></wide-button>
                    </div>
                </div>
            }

        </div>

        <hr>

        <div class="text-mobile-center">
            <div class="text-mobile-center">

                <div class="row">

                    <div class="col-md-3">
                        <wide-button (click)="toggleWidgets()" [title]="showWidgets.value ? 'Hide Widgets' : 'Show Widgets'"
                                     [icon]="'fas fa-magic'"></wide-button>
                    </div>


                    <div class="col-md-3">
                        <wide-button (click)="persistChanges()" [title]="isEditModeEnabled ? 'Finish Editing' : 'Edit'"
                                     [icon]="isEditModeEnabled ? 'fas fa-check' : 'fas fa-edit'"></wide-button>
                    </div>


                    <div class="col-md-3">
                        <wide-button (click)="refreshLinkCache()" [title]="'Refresh'"
                                     [icon]="'fas fa-sync'"></wide-button>
                    </div>

                    <div class="col-md-3 o-grid">
                        <div class="o-grid__col import-link">
                            <import-links></import-links>
                        </div>
                        <div class="o-grid__col">
                            <export-links></export-links>
                        </div>
                    </div>
                </div>

            </div>
        </div>

    </div>
</div>
